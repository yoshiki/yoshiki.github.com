---
layout: post
title: "How to export/import secret key from Keychain"
date: 2013-10-09 12:12
comments: true
categories: 
---
iOS(キーチェーン的にはiOSとか関係ないけど)の秘密鍵をエクスポート/イポートする方法と注意点についてまとめ。

## 秘密鍵のエクスポートの方法

エクスポートするときはキーチェーンのウィンドウの左側にある`鍵`のところを選択してから、右側にある該当の秘密鍵を選択し、右クリックで`書き出す`を選択しないと、その後のインポートが失敗する。

## 秘密鍵のインポートの方法

秘密鍵のファイル(foo.p12)をFinderでダブルクリックするとエクスポート時に設定したパスワードを聞かれるので、それを入力すればインポートできます。

## 公開鍵のエクスポートの方法

こちら先程と同様にキーチェーンのウィンドウの左側にある`鍵`のところを選択してから、右側にある該当の公開鍵を選択し、右クリックで`書き出す`を選択すればエクスポートできます。

## 公開鍵のインポートの方法

公開鍵はコマンドラインでインポートしなければならないらしい。

`security`というコマンドを使って以下のようにするとインポートできます。

```
# security import foo.pem -k ~/Library/Keychains/login.keychain
```

秘密鍵のようにFinderでダブルクリックしても、見掛け上はインポートできていますが、実際に証明書とかを作成しようとすると作成できません。

## その他の注意点

よく、秘密鍵さえ取っておけばいいでしょとかなってるけど、公開鍵もエクスポートしてバックアップを取っておかないとだめっぽいです。

秘密鍵から公開鍵を作れるんじゃないかと思って調べてみたんだけど、いまのところ方法がみつかっていません。方法を知ってる方がいたら教えてください！
