---
layout: post
title: POPFileにKakasiの分かち書きパッチをあててみた
mt_id: 470
date: 2005-07-11 11:49:54.000000000 +09:00
author: clouder
category: Software
---
以前<a href="http://clouder.jp/yoshiki/mt/archives/000382.html" target="_blank">POPFile遅すぎ</a>で書いた方法でPOPFileを早くしたのですが、人間というものは我侭な動物で、だんだんその速度が遅く感じるようになってきました。

ということで、なんか他に早くする方法がないかと調べてみたら、http://sourceforge.jp/projects/popfile/に<a href="http://sourceforge.jp/tracker/index.php?func=detail&aid=5577&group_id=759&atid=2945" target="_blank">Kakasiの分かち書きのパフォーマンスを早くするパッチが公開</a>されていたので、それを導入してみた。

導入方法は簡単で、MailParse.pm(MailParse.pm のアップデート版2)、Bayes.pm(Bayes.pm のアップデート版2)、Text-Kakasi-2.04-windows.zip(Text::Kakasi 2.04 Windows 用バイナリ)をダウンロードしてきて、Program Files/POPFile以下の適当なディレクトリに置いてからPOPFileを再起動するだけです。(ちなみにこれはPOPFileのバージョンが0.22.2を想定しています)

このパッチがなにをやってるかというと、ソースを見る限りだと、普通メールを読む毎に読み込んでいる処理部分を、起動時にグローバルな変数に持ってしまって、それ以降はそれを使うような感じにしているようです。なので使用するメモリは増えるということなので、メモリがあまりのっていないマシンだと若干辛いかも。

そして効果の程ですが…、うーん早くなったような気がするかな…といった感じです。
気分的なものが大きい(笑)、速度を計測したらよかったんだけどな。 
