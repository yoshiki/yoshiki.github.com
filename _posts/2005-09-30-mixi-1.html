---
layout: post
title: はてなとmixiの勉強会を聞いてみた
mt_id: 539
date: 2005-09-30 21:40:07.000000000 +09:00
author: clouder
category: Diary
---
ちょと前の情報ですが、<a href="http://www.hatena.ne.jp/info/tech">はてなとmixiの勉強会</a>を聞いてみました。興味を持った話を数点。

<ul>
<li>[はてな]本番化のスタイル</li>

どうやら管理サーバにこのファイルを本番化しろ！と指定すると、それがキューに入って各アプリケーションサーバが自動でcvs update(?)してapacheの再起動までするとかなんとか。これｶｯｺｲｲな…。以前ある友人が管理するサービスでDNSの設定とか、サーバの再起動とかをその人が作ったWeb GUIから操作していて、これもカッコイイなーとか見てたんだけど、管理する手間を省くって事に関してなんか興味あるし、腕の見せ所だったりするんじゃないかと思ったりする。前にも書いたけど、ちょっとしたことだけどめんどいからいつもやっちゃってるものを改善していくのは大切ですよね。まぁ必要に迫られてやらざるをえないときもありますが…。

<li>[mixi]mysqlの--skip-grant-tables</li>
mixiではmysqlへの接続を、ローカルなので--skip-grant-tablesを使ってやっているらしい。どうやら、若干ですが接続が早いのではないかという話。セキュリティ的にどうかというと若干弱いっちゃ弱い(ローカルだからいいっちゃいいけど…)。

<li>[mixi]squidのsibling</li>
※自分はこのsiblingを知らなくて、音で聞いたので探すのに若干時間を要しました(笑)
なるほど、squidに兄弟を作ってキャッシュ効率を高くしているらしい。自分がキャッシュをもっていなかったら兄弟に問い合わせるっぽいです。

<li>[mixi]画像の吐き方</li>
ここがよく聞きとれなくて実際にどういう構成かわからないんですが、聞きかじりだと、foo.plからmysqlに画像をどこのサーバに置けばいいか問い合わせてそこに格納し、リクエストが来たらhtmlでうまいこと画像を出すということなのだが、htmlで画像をうまいこと出す部分がよく聞きとれませんでした…。ここ気になる…。画像がどこに格納されているかはmysqlが知っているということなので、mysqlに問い合わせをしないといけないと思うんだけどなー。

<li>[mixi]テーブルは<s>MyISAM</s>InnoDBが多い</li>
Read/Writeが多いので、MyISAMにしているとのこと。ふむ。
</ul>

上記以外はなんとなく想像できる内容でした。memcachedも使ってるらしいし。
あと聞きたいのは(←ずうずうしい…)、アプリケーションサーバとかリバースプロキシサーバとかのapacheなどのMaxClientsをどのくらいにしているのかですね。カリカリにチューニングしているのか、ハイパフォーマンスMySQLでJeremyさんがYahoo! comのことを書いてた様に1台当り MaxClients 30 ぐらいしか立ち上げてないのか。

悶々。
 
